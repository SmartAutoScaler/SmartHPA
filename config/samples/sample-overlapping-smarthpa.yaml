apiVersion: autoscaling.sarabala.io/v1alpha1
kind: SmartHorizontalPodAutoscaler
metadata:
  name: sample-overlapping-smarthpa
spec:
  HPAObjectRef:
    name: sample-app-hpa
    namespace: default
  triggers:
    - name: peak-hours
      startTime: "09:00:00"  # 9:00 AM
      endTime: "11:30:00"    # 11:30 AM
      timezone: "America/Los_Angeles"
      priority: 100          # Higher priority
      interval:
        recurring: "M,TU,W,TH,F"   # Monday through Friday
      startHPAConfig:
        minReplicas: 8
        maxReplicas: 15
    - name: mid-morning
      startTime: "10:30:00"  # 10:30 AM (overlaps with peak-hours)
      endTime: "13:00:00"    # 1:00 PM
      timezone: "America/Los_Angeles"
      priority: 50           # Lower priority
      interval:
        recurring: "M,TU,W,TH,F"   # Monday through Friday
      startHPAConfig:
        minReplicas: 5
        maxReplicas: 10
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: sample-app-hpa
  namespace: default
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: sample-app
  minReplicas: 2
  maxReplicas: 5
  metrics:
    - type: Resource
      resource:
        name: cpu
        target:
          type: Utilization
          averageUtilization: 80
